name = "ops-forward-api"
main = "worker/src/index.js"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
account_id = "d6ff2f0914adb1d9faae77870fadb7cc"
workers_dev = true

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "ops-forward-db"
database_id = "f5f00a48-6e7c-4b01-b1d3-d2f52c5dd5eb"
migrations_dir = "worker/migrations"

# Vectorize binding for AI embeddings
[[vectorize]]
binding = "VECTORIZE"
index_name = "site-search"

# R2 bucket for screenshots
[[r2_buckets]]
binding = "SCREENSHOTS"
bucket_name = "px-tester-screenshots"

# Workers AI binding
[ai]
binding = "AI"

# Browser Rendering binding
[browser]
binding = "BROWSER"

# CORS configuration
[vars]
FRONTEND_URL = "https://ops-forward.coscient.workers.dev"
GOOGLE_REDIRECT_URI = "https://ops-forward-api.coscient.workers.dev/api/auth/google/callback"

# Observability - Logging configuration
[observability]
enabled = true

[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
